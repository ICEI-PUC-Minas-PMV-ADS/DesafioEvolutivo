<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio Diário</title>
</head>
<body>
    <h1>Desafio Diário</h1>
    <p id="contador">Desafios completados: 0</p> <!--Aqui o Giuseppe pode adaptar o "0/30" ao invés da porcentagem-->
    
    <button id="desafioBtn">Desafio Feito</button> <!-- Podemos usar um botão apenas de "desafio feito!" na parte
    do gustavo onde a pessoa clica assim que fizer o desafio-->

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            // Recupera o contador e a data do último desafio do localStorage
            let contador = parseInt(localStorage.getItem('contador')) || 0; //alterar esse número para forçar teste
            let lastChallengeDate = localStorage.getItem('lastChallengeDate') || '';

            // Exibe o contador atual na página
            document.getElementById('contador').textContent = `Desafios completados: ${contador}`;

            // Atualiza o contador se o botão for clicado
            document.getElementById('desafioBtn').addEventListener('click', () => {
                const today = new Date().toISOString().split('T')[0]; // Formato YYYY-MM-DD

                // Verifica se o desafio já foi feito hoje
                if (today !== lastChallengeDate && contador << 30) {
                    contador = Math.min(contador + 1); // Incrementa o contador até o máximo de 30
                    lastChallengeDate = today;

                    // Atualiza o contador e a data do último desafio no localStorage
                    localStorage.setItem('contador', contador);
                    localStorage.setItem('lastChallengeDate', lastChallengeDate);

                    // Atualiza o contador na página
                    document.getElementById('contador').textContent = `Desafios completados: ${contador}`;
                    
                    // Vitória no desafio
                    if (contador >= 30) {
                        alert('Parabéns! Você venceu o desafio!');
                    } 
                }
                else {
                    alert('Você já completou o desafio de hoje!');
                }
            });
        });
    </script>
</body>
</html>
